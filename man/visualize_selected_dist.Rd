% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/create_distribution.R
\name{visualize_selected_dist}
\alias{visualize_selected_dist}
\title{Visualize selected fire perimeter distribution}
\usage{
visualize_selected_dist(
  result = result,
  logaritmic = TRUE,
  target_hist = target_hist,
  bins = bins
)
}
\arguments{
\item{result}{A list object, typically the output from the `select_events` function.
It is expected to contain at least the following elements:
\describe{
  \item{selected_surfaces}{Numeric vector of surface values for the selected events.}
  \item{total_surface}{Numeric value representing the sum of surface areas of the selected events.}
  \item{final_discrepancy}{Numeric value representing the final discrepancy metric for the selection.}
}}

\item{logaritmic}{Logical (assumed to be available in the calling environment).
If `TRUE`, it indicates that a logarithmic transformation was applied to the
fire sizes during the selection process and should be used for visualization.
If `FALSE`, the original scale is used.}

\item{target_hist}{Numeric vector (assumed to be available in the calling environment).
The density values of the target histogram, typically obtained from `build_target_hist`.}

\item{bins}{Numeric vector (assumed to be available in the calling environment).
The breakpoints for the histogram bins. This should be consistent with the
`bins` output from `build_target_hist`.}
}
\value{
This function does not return a value. It produces a plot as a side effect
  and prints information to the console.
}
\description{
This function generates a histogram comparing the distribution of selected
fire surfaces (e.g., areas) with a predefined target distribution. It also
prints key statistics about the selection, such as the number of events,
total surface area, and the discrepancy with the target. The visualization
automatically adapts to whether a logarithmic transformation was used.
}
\examples{
\dontrun{
# This example requires the 'foreach' package and a parallel backend (e.g., 'doParallel')
# to be set up.
# library(doParallel)

# Dummy data for demonstration (replace with your actual data)
set.seed(123)
historical_data_for_target <- floor(fit_powerlaw(n = 500, alpha = 2, xmin = 10, xmax = 10000))
event_surfaces <- fit_powerlaw(n = 10000, alpha = 2, xmin = 10, xmax = 10000)
# Discard simulated fires that are too large (below 110\% max historical size)
event_surfaces <- event_surfaces[event_surfaces<max(historical_data_for_target)*1.1]
event_probabilities <- rnorm(length(event_surfaces))
event_probabilities <- (event_probabilities-min(event_probabilities))/(max(event_probabilities)-min(event_probabilities))

y <- 100 #number of years spanning historical fire data
check_fire_data(fires_hist_size = historical_data_for_target,
                sim_perimeters_size = event_surfaces,
                n_years = y)

reference_surface_example <- sum(historical_data_for_target)/y
surface_threshold_example <- check_fire_data(fires_hist_size = historical_data_for_target,
                                             sim_perimeters_size = event_surfaces,
                                             n_years = 10)
tolerance_example <- 0.1

# Create a dummy target histogram (assuming 'event_surfaces' from historical data)
# For a real scenario, 'event_surfaces' here would be your historical fire sizes.

target_info_example <- build_target_hist(num_bins = 10, logaritmic = TRUE,
                                         sizes = historical_data_for_target,
                                         event_surfaces = event_surfaces)
target_hist <- target_info_example$target_hist
bins <- target_info_example$bins

# Run the selection process
selected_events_result <- select_events(
  event_sizes = event_surfaces,
  event_probabilities = event_probabilities,
  target_hist = target_hist,
  bins = bins,
  reference_surface = reference_surface_example,
  surface_threshold = surface_threshold_example,
  tolerance = tolerance_example,
  max_it = 2 # Reduced iterations for example
)

visualize_selected_dist(result = selected_events_result,
  logaritmic = T,
  target_hist = target_hist,
  bins = bins)

# Stop the parallel cluster when done
# stopImplicitCluster()

visualize_selected_dist(result = selected_events_result)
}
}
