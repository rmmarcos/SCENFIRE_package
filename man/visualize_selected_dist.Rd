% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/create_distribution.R
\name{visualize_selected_dist}
\alias{visualize_selected_dist}
\title{Visualize Selected Fire Perimeter Distribution}
\usage{
visualize_selected_dist(result = result, logaritmic = T)
}
\arguments{
\item{result}{A list object, typically the output from the `select_events` function.
It is expected to contain at least the following elements:
\describe{
  \item{selected_surfaces}{Numeric vector of surface values for the selected events.}
  \item{total_surface}{Numeric value representing the sum of surface areas of the selected events.}
  \item{final_discrepancy}{Numeric value representing the final discrepancy metric for the selection.}
}}

\item{logaritmic}{Logical (assumed to be available in the calling environment).
If `TRUE`, it indicates that a logarithmic transformation was applied to the
fire sizes during the selection process and should be used for visualization.
If `FALSE`, the original scale is used.}

\item{bins}{Numeric vector (assumed to be available in the calling environment).
The breakpoints for the histogram bins. This should be consistent with the
`bins` output from `build_target_hist`.}

\item{target_hist}{Numeric vector (assumed to be available in the calling environment).
The density values of the target histogram, typically obtained from `build_target_hist`.}
}
\value{
This function does not return a value. It produces a plot as a side effect
  and prints information to the console.
}
\description{
This function generates a histogram comparing the distribution of selected
fire surfaces (e.g., areas) with a predefined target distribution. It also
prints key statistics about the selection, such as the number of events,
total surface area, and the discrepancy with the target. The visualization
automatically adapts to whether a logarithmic transformation was used.
}
\examples{
\dontrun{
# This example assumes 'select_events', 'build_target_hist', 'event_surfaces'
# (for building target), 'event_probabilities', 'reference_surface',
# 'surface_threshold', 'tolerance' are defined or available.
#
# 1. Define dummy historical and event data for demonstration
historical_fire_sizes_ex <- c(10, 50, 100, 200, 500, 1000, 1500, 2000, 3000, 5000)
event_surfaces_ex <- c(10, 20, 30, 40, 50, 60, 70, 80, 90, 100,
                      110, 120, 130, 140, 150, 160, 170, 180, 190, 200,
                      250, 300, 350, 400, 450, 550, 600, 700, 800, 900,
                      1000, 1200, 1400, 1600, 1800, 2000, 2500, 3000, 3500, 4000, 4500, 4800)
event_probabilities_ex <- rep(1/length(event_surfaces_ex), length(event_surfaces_ex))

# 2. Build target histogram (e.g., using logarithmic scale)
l <- TRUE # Set the logarithmic flag for the selection and visualization
target_info <- build_target_hist(num_bins = 10, l = l, sizes = historical_fire_sizes_ex)
target_hist <- target_info$target_hist
bins <- target_info$bins

# 3. Run the selection function (requires 'foreach' and a parallel backend if used)
# For this example, let's create a dummy 'result' that mimics the output
# of select_events without actually running it, to make the example runnable.

# --- Start of dummy 'result' creation for example ---
# In a real scenario, you'd call select_events here:
# library(doParallel)
# registerDoParallel(cores = 2)
# result <- select_events(event_surfaces = event_surfaces_ex,
#                        event_probabilities = event_probabilities_ex,
#                        target_hist = target_hist,
#                        bins = bins,
#                        reference_surface = 15000, # Example target sum
#                        surface_threshold = 0.8,
#                        tolerance = 0.1,
#                        max_it = 10)
# stopImplicitCluster()

# Create a dummy result for direct example of visualize_selected_dist
selected_idx <- sample(1:length(event_surfaces_ex), 30) # Randomly select some indices
dummy_selected_surfaces <- event_surfaces_ex[selected_idx]
dummy_total_surface <- sum(dummy_selected_surfaces)
dummy_final_discrepancy <- calculate_discrepancy(dummy_selected_surfaces, target_hist, bins, l)

result_dummy <- list(
  selected_surfaces = dummy_selected_surfaces,
  total_surface = dummy_total_surface,
  final_discrepancy = dummy_final_discrepancy
)
# --- End of dummy 'result' creation ---

# 4. Visualize the results
visualize_selected_dist(result = result_dummy)

# Example with linear scale (assuming appropriate setup for target_hist and bins)
# l <- FALSE
# target_info_linear <- build_target_hist(num_bins = 10, l = l, sizes = historical_fire_sizes_ex)
# target_hist_linear <- target_info_linear$target_hist
# bins_linear <- target_info_linear$bins
# result_dummy_linear <- list(
#   selected_surfaces = sample(event_surfaces_ex, 30),
#   total_surface = sum(sample(event_surfaces_ex, 30)),
#   final_discrepancy = 0.05 # Dummy value
# )
# visualize_selected_dist(result = result_dummy_linear, l = l,
#                         bins = bins_linear, target_hist = target_hist_linear)
}
}
